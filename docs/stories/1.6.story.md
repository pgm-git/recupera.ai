# Story 1.6: Frontend Production — Real Data + UX

**Epic:** 1 — Production Readiness
**Fase:** 3 (Frontend)
**Status:** Draft
**Esforco:** 55h
**Dependencias:** 1.2 (Auth), 1.5 (Backend)

---

## Descricao

Como usuario SaaS, preciso de um frontend profissional com dados reais, tratamento de erros, e fluxos completos para gerenciar minha operacao de recuperacao de vendas.

## Acceptance Criteria

### Component Library Baseline (4.5h)
- [ ] Button component (primary, secondary, ghost, danger variants)
- [ ] Input component (text, password, email, select variants)
- [ ] Modal base component (reusavel por ProductModal e QRModal)
- [ ] Badge component (status variants com cores semanticas)
- [ ] Toast/Alert component (success, error, warning, info)

### Dashboard Real (6h)
- [ ] KPIs calculados a partir de dados reais (Supabase queries)
- [ ] Grafico com dados reais (ultimos 7/30 dias)
- [ ] Date range selector funcional
- [ ] Status leads sidebar com contadores reais
- [ ] Tabela de leads com dados do banco
- [ ] "Ver todos" navega para lista completa de leads

### Error Handling (3h)
- [ ] Error boundaries React em todas as pages
- [ ] Error state visual em todos os componentes
- [ ] Toast notifications para feedback de acoes
- [ ] Substituir todos os `alert()` por toasts
- [ ] Loading states em todos os componentes que fazem fetch

### Lead Detail + Conversation (10h)
- [ ] Pagina de detalhe do lead
- [ ] Visualizacao de conversation_log como chat bubbles
- [ ] Scroll automatico para ultima mensagem
- [ ] Status timeline do lead
- [ ] Acoes: alterar status, agendar recontato
- [ ] Link para voltar a lista

### Onboarding Wizard (8h)
- [ ] Step 1: Boas-vindas + explicacao do produto
- [ ] Step 2: Conectar WhatsApp (reusa QRModal)
- [ ] Step 3: Configurar primeiro produto
- [ ] Step 4: Configurar webhook na plataforma
- [ ] Step 5: Enviar lead teste para validar pipeline
- [ ] Progresso salvo no banco (retomavel)
- [ ] Skip button disponivel

### Products Funcional (5h)
- [ ] Search funcional (filtrar por nome)
- [ ] Filter por status funcional
- [ ] Filter por plataforma funcional
- [ ] Confirmacao antes de deletar/pausar produto
- [ ] Feedback visual apos salvar (toast)

### Data Caching (4h)
- [ ] TanStack Query instalado e configurado
- [ ] Queries com stale time configurado
- [ ] Invalidation apos mutations
- [ ] Optimistic updates para toggles

### Design System (2h)
- [ ] Design tokens em arquivo separado (cores, spacing, radius)
- [ ] tailwind.config.ts com tema customizado
- [ ] Remover config inline do index.html

### Profile/Account (3h)
- [ ] Pagina de perfil com dados do usuario
- [ ] Edicao de nome e telefone
- [ ] Visualizacao de API key
- [ ] Informacoes de plano (placeholder para billing futuro)

### Acessibilidade Basica (4.5h)
- [ ] ARIA labels em componentes interativos
- [ ] Focus trap em modais
- [ ] Skip navigation link
- [ ] Contraste corrigido em textos slate-400
- [ ] Status badges com aria-label

### Rate Limiting (3h)
- [ ] Rate limiting nos endpoints de API
- [ ] Feedback no frontend quando rate limited
- [ ] Configuracao por endpoint (webhook mais permissivo)

### Misc (2h)
- [ ] Botoes "Ver Relatorio Completo" funcionais ou removidos
- [ ] Date range selector funcional no dashboard
- [ ] Safe area para iPhones com notch

## Definition of Done

- [ ] Dashboard mostra dados reais do banco
- [ ] Zero dados hardcoded no frontend
- [ ] Error states em todos os componentes
- [ ] Lead detail view com conversation
- [ ] Onboarding completo (5 steps)
- [ ] Search/filter funcional em Products
- [ ] TanStack Query gerenciando cache
- [ ] Acessibilidade basica (ARIA, focus trap)

## File List

*Atualizado durante implementacao*

---
